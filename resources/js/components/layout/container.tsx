import { type ReactNode } from 'react';
import { cva, type VariantProps } from 'class-variance-authority';
import { twMerge } from 'tailwind-merge'

const containerVariants = cva([
	'relative',
	'flex',
	'w-100%',
	'max-w-[140rem]',
	'mx-auto',
	'xl:py-32',
	'xl:px-64',
	'md:py-16',
	'md:px-32',
	'py-16',
	'px-8',
	'*:relative',
	'*:z-3',
	'*:flex-nowrap',

	'before:content[""]',
	'before:absolute',
	'before:block',
	'before:top-1/2',
	'before:left-1/2',
	'before:-translate-x-1/2',
	'before:-translate-y-1/2',
	'before:w-[100vw]',
	'before:h-[100%]',
	'before:z-1',
], {
	variants: {
		direction: {
			col: [
				'flex-col',
				'*:flex-grow-1',
			],
			row: [
				'flex-col',
				'md:flex-row',
			],
			alwaysrow: [
				'flex-row',
			]
		},
		background: {
			primary: [
				'before:bg-primary',
			],
			canvas: [
				'before:bg-canvas',
			],
			highlight: [
				'before:bg-highlight',
			],
			accent: [
				'before:bg-accent',
			],
			white: [
				'before:bg-white',
			]
		}
	},
	defaultVariants: {
		direction: 'col',
		background: 'canvas',
	},
});

interface containerProps {
	id?: string;
	children: ReactNode;
	className?: string;
	direction?: VariantProps<typeof containerVariants>['direction'];
	background?: VariantProps<typeof containerVariants>['background'];
}

export default function Container({ children, direction, background, id, className = '' }: containerProps) {
	return (
		<section className={twMerge(containerVariants({ direction, background }), className)} id={id}>
			{children}
			{background === 'canvas' && (
				<div className="[&]:static [&]:z-2">
					<div className="
						[&]:absolute
						[&]:z-2
						bottom-0
						left-0
						-translate-x-[50%]
						translate-y-[46%]
						xl:-translate-x-[100%]
						xl:translate-y-[46%]
						rotate-30
						scale-y-90
						scale-x-70
					">
						<svg
							className="fill-white"
							version="1.2"
							xmlns="http://www.w3.org/2000/svg"
							viewBox="0 0 359 506"
							width="359"
							height="506">
							<path fillRule="evenodd" d="m94.6 194.6c5.9 4.2 11.7 8.5 17.7 12.6 3.9 2.7 8.5 4.7 12.1 0 3.6-4.6 0.4-8.7-2.7-12-4-4.2-8.5-7.8-12.4-12-17.3-18.4-35.1-37.3-38.4-63.4-6.8-53 30.8-82 79.3-95.1 0.8-0.2 1.7 0 2.6 0.2 1.3 0.4 2.2 1.9 1.9 3.3-0.1 0.9-0.4 1.7-0.8 2.4-17.7 26.2-25 54.5-20 86.3 1.6 10.5 6.9 18.2 12.5 26.2 1.1 1.7 4.4 3.2 6.2 2.8 3.4-0.8 2.5-4.5 2.2-7-1.8-15.6-4.7-31.2-5.5-46.8-2.7-49 12.6-70.6 59-85.8 28.6-9.4 28.6-9.4 43.1 17 1.8 3.2 3.3 6.5 5.4 9.5 12.8 18.1 11 36.8 2.9 56.1-6.4 15.2-16.9 27.8-26.2 41.3-1 1.5-2.4 4.5-1.7 5.4 1.9 2.6 4.7 0.7 6.2-0.9 20.1-21.1 36.5-44.3 38.9-74.7 0.2-2.8-2.9-6.7 0.9-7.9 2.1-0.7 5.6 1.5 8 3.2 35.2 24.2 40.7 66.5 13.9 99.6-15.5 19.1-36.6 30.5-55.8 44.6-3.9 2.8-9.2 5.7-5.9 11.5 2.9 5 8.4 2.8 12.3 1.1 32.2-13.8 61.1-32.1 79.6-63.2 2.6-4.4 4.6-9.2 6.5-14 2-5.2 5.3-5.2 7.4-0.1 2.9 7 5.7 13.9 8.4 20.9 1.3 3.7 1.8 7.7 2.4 11.6 6.7 38.1-8.5 64-45.5 74.8-15 4.4-30.9 5.7-46.3 8.9-4.1 0.8-10.5 1.8-9.5 7.5 1 6 7.4 4.5 11.5 3.8 27.1-4.2 53-12.5 77-26 3.8-2.1 6.5-6.1 9.6-9.3 0.7-0.7 1.3-1.5 1.9-2.3 1-1.3 2.2-1.1 2.7 0.5 0.4 1 0.6 2 0.8 3 0.8 4.8 1.4 9.6 1.9 14.4 3.6 41.3-25.2 71.8-66.6 69.7-12.1-0.6-24-3.1-36-4.7-5.7-0.7-12.8-2.8-14.4 4.9-1.4 6.6 5.2 9.2 10.4 10.4 27.6 6.5 54.7 8 78.4-11.9 0.4-0.3 0.8-0.6 1.3-0.9 0.8-0.4 1.6 0 1.6 0.9 0.1 0.6 0.1 1.2-0.1 1.7-4.4 13.5-7.8 27.5-19.3 37.3-21.8 18.4-46.1 31.3-74.7 34.7-35.2 4.2-68.6-24.7-70.2-60.1q-0.1-1.3-0.2-2.7c-0.2-1.4-1-1.5-1.8-0.1-0.4 0.9-0.9 1.7-1.1 2.6-9.2 39.8-18 79.7-27.7 119.4-4.7 19-11 37.7-16.6 56.5-0.9 3.1-2.2 5.6-6.3 4.7-4.5-1-2.1-3.3-1.4-5.4 21.5-58.5 32.8-119.5 46.3-180 0.7-3.1 1.1-6.2 1.4-9.4 0.5-5.2-2.3-6.5-4-1.7-1 2.9-1.7 6-2.8 8.8-16.9 42-44.1 52.9-85.3 34.1-24-10.9-43.5-27-57.7-49.4-0.5-0.7-0.8-1.5-1.2-2.3-0.5-1.3 0.3-2.2 1.9-1.9q1.4 0.3 2.8 0.7c7 2 13.9 4.2 20.8 6.2 0.5 0.1 1.1 0.1 1.7-0.1 1-0.2 1.2-0.9 0.6-1.5-0.4-0.4-0.8-0.8-1.2-1-30.2-18.7-38.7-47.1-36.2-80.5 0.2-2 0.4-5 1.6-5.7 2.7-1.4 3 2.1 4.1 3.5 20.8 26.8 51.9 32.4 82 39.6 4 0.9 9.5 0 10.3-5.1 1-6.1-4.9-6.9-9.1-7.9-18.8-4.5-38.1-7-55.3-16.9-12.3-7.1-21.3-16.5-23.1-30.8-3.6-29.1 0.4-56.8 18.2-81.1 3.5-4.8 6.7-12.8 12.1-12.1 3.6 0.5 0.4 9.5 0.8 14.7 1.2 12 5.4 22.9 11.9 32.9 7 10.8 15.5 20.2 24.7 29.1 3.9 3.9 10.8 9.5 15.3 12.8zm124.5-36.8c-1.2 2.2-1.5 4.4 0.5 6.6 3.6 4 32.5-2.7 31.2-24.6-0.2-3.6-5.4-2.6-8.1-0.9-3.9 2.4-7.7 4.9-11.5 7.4-4.5 3.1-10.3 8.1-12.1 11.5zm40.3 0.7c-1.3 2-1.7 4.1 0.7 6.5 4.5 4.7 28.5-14 24.2-19.4-4.3-5.3-9.7-2.6-14.2 1.1-1.1 0.9-2.2 1.9-3.2 2.9-1.8 1.7-5.4 5.5-7.5 8.9zm-154.2 118c-0.9 0.9-1.3 1.9 0.1 3.6 2.2 2.7 6.3 3 9.2 1.2 8.4-5.2 8.7-16.7 1.9-13.3-5 2.4-9.6 6.8-11.2 8.5z"/>
						</svg>
					</div>
					<div className="
						[&]:absolute
						[&]:z-2
						top-0
						right-0
						translate-x-[70%]
						-translate-y-[46%]
						xl:translate-x-[80%]
						xl:-translate-y-[46%]
						rotate-30
						-scale-y-90
						-scale-x-70
					">
						<svg
							className="fill-white"
							version="1.2"
							xmlns="http://www.w3.org/2000/svg"
							viewBox="0 0 359 506"
							width="359"
							height="506">
							<path fillRule="evenodd" d="m94.6 194.6c5.9 4.2 11.7 8.5 17.7 12.6 3.9 2.7 8.5 4.7 12.1 0 3.6-4.6 0.4-8.7-2.7-12-4-4.2-8.5-7.8-12.4-12-17.3-18.4-35.1-37.3-38.4-63.4-6.8-53 30.8-82 79.3-95.1 0.8-0.2 1.7 0 2.6 0.2 1.3 0.4 2.2 1.9 1.9 3.3-0.1 0.9-0.4 1.7-0.8 2.4-17.7 26.2-25 54.5-20 86.3 1.6 10.5 6.9 18.2 12.5 26.2 1.1 1.7 4.4 3.2 6.2 2.8 3.4-0.8 2.5-4.5 2.2-7-1.8-15.6-4.7-31.2-5.5-46.8-2.7-49 12.6-70.6 59-85.8 28.6-9.4 28.6-9.4 43.1 17 1.8 3.2 3.3 6.5 5.4 9.5 12.8 18.1 11 36.8 2.9 56.1-6.4 15.2-16.9 27.8-26.2 41.3-1 1.5-2.4 4.5-1.7 5.4 1.9 2.6 4.7 0.7 6.2-0.9 20.1-21.1 36.5-44.3 38.9-74.7 0.2-2.8-2.9-6.7 0.9-7.9 2.1-0.7 5.6 1.5 8 3.2 35.2 24.2 40.7 66.5 13.9 99.6-15.5 19.1-36.6 30.5-55.8 44.6-3.9 2.8-9.2 5.7-5.9 11.5 2.9 5 8.4 2.8 12.3 1.1 32.2-13.8 61.1-32.1 79.6-63.2 2.6-4.4 4.6-9.2 6.5-14 2-5.2 5.3-5.2 7.4-0.1 2.9 7 5.7 13.9 8.4 20.9 1.3 3.7 1.8 7.7 2.4 11.6 6.7 38.1-8.5 64-45.5 74.8-15 4.4-30.9 5.7-46.3 8.9-4.1 0.8-10.5 1.8-9.5 7.5 1 6 7.4 4.5 11.5 3.8 27.1-4.2 53-12.5 77-26 3.8-2.1 6.5-6.1 9.6-9.3 0.7-0.7 1.3-1.5 1.9-2.3 1-1.3 2.2-1.1 2.7 0.5 0.4 1 0.6 2 0.8 3 0.8 4.8 1.4 9.6 1.9 14.4 3.6 41.3-25.2 71.8-66.6 69.7-12.1-0.6-24-3.1-36-4.7-5.7-0.7-12.8-2.8-14.4 4.9-1.4 6.6 5.2 9.2 10.4 10.4 27.6 6.5 54.7 8 78.4-11.9 0.4-0.3 0.8-0.6 1.3-0.9 0.8-0.4 1.6 0 1.6 0.9 0.1 0.6 0.1 1.2-0.1 1.7-4.4 13.5-7.8 27.5-19.3 37.3-21.8 18.4-46.1 31.3-74.7 34.7-35.2 4.2-68.6-24.7-70.2-60.1q-0.1-1.3-0.2-2.7c-0.2-1.4-1-1.5-1.8-0.1-0.4 0.9-0.9 1.7-1.1 2.6-9.2 39.8-18 79.7-27.7 119.4-4.7 19-11 37.7-16.6 56.5-0.9 3.1-2.2 5.6-6.3 4.7-4.5-1-2.1-3.3-1.4-5.4 21.5-58.5 32.8-119.5 46.3-180 0.7-3.1 1.1-6.2 1.4-9.4 0.5-5.2-2.3-6.5-4-1.7-1 2.9-1.7 6-2.8 8.8-16.9 42-44.1 52.9-85.3 34.1-24-10.9-43.5-27-57.7-49.4-0.5-0.7-0.8-1.5-1.2-2.3-0.5-1.3 0.3-2.2 1.9-1.9q1.4 0.3 2.8 0.7c7 2 13.9 4.2 20.8 6.2 0.5 0.1 1.1 0.1 1.7-0.1 1-0.2 1.2-0.9 0.6-1.5-0.4-0.4-0.8-0.8-1.2-1-30.2-18.7-38.7-47.1-36.2-80.5 0.2-2 0.4-5 1.6-5.7 2.7-1.4 3 2.1 4.1 3.5 20.8 26.8 51.9 32.4 82 39.6 4 0.9 9.5 0 10.3-5.1 1-6.1-4.9-6.9-9.1-7.9-18.8-4.5-38.1-7-55.3-16.9-12.3-7.1-21.3-16.5-23.1-30.8-3.6-29.1 0.4-56.8 18.2-81.1 3.5-4.8 6.7-12.8 12.1-12.1 3.6 0.5 0.4 9.5 0.8 14.7 1.2 12 5.4 22.9 11.9 32.9 7 10.8 15.5 20.2 24.7 29.1 3.9 3.9 10.8 9.5 15.3 12.8zm124.5-36.8c-1.2 2.2-1.5 4.4 0.5 6.6 3.6 4 32.5-2.7 31.2-24.6-0.2-3.6-5.4-2.6-8.1-0.9-3.9 2.4-7.7 4.9-11.5 7.4-4.5 3.1-10.3 8.1-12.1 11.5zm40.3 0.7c-1.3 2-1.7 4.1 0.7 6.5 4.5 4.7 28.5-14 24.2-19.4-4.3-5.3-9.7-2.6-14.2 1.1-1.1 0.9-2.2 1.9-3.2 2.9-1.8 1.7-5.4 5.5-7.5 8.9zm-154.2 118c-0.9 0.9-1.3 1.9 0.1 3.6 2.2 2.7 6.3 3 9.2 1.2 8.4-5.2 8.7-16.7 1.9-13.3-5 2.4-9.6 6.8-11.2 8.5z"/>
						</svg>
					</div>
				</div>
			)}
		</section>
	)
}